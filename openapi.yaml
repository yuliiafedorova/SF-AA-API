openapi: 3.0.3
info:
  title: Referral API
  description: REST API для створення та оновлення кастомного об'єкта Referral__c у Salesforce
  version: 1.0.0
servers:
  - url: /services/apexrest/mobile/referral
    description: Salesforce Apex REST endpoint
paths:
  /:
    post:
      summary: Створити новий Referral__c
      description: Створює запис Referral__c для відстеження реферального запрошення
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReferralRequest'
      responses:
        '200':
          description: Успішне створення запису
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReferralResponse'
        '400':
          description: Некоректні дані
        '500':
          description: Внутрішня помилка сервера
    put:
      summary: Оновити існуючий Referral__c
      description: Оновлює запис Referral__c по External_Id__c
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReferralRequest'
      responses:
        '200':
          description: Успішне оновлення запису
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReferralResponse'
        '400':
          description: Некоректні дані
        '404':
          description: Запис не знайдено
        '500':
          description: Внутрішня помилка сервера
components:
  schemas:
    ReferralRequest:
      type: object
      required:
        - External_Id__c
        - Sender__c
        - Invited_User_FullName__c
        - Invited_User_Phone__c
        - Status__c
      properties:
        Sender__c:
          type: string
          description: Salesforce Id контакту, який відправив запрошення
        Registered_User__c:
          type: string
          description: Salesforce Id контакту, який зареєструвався (опціонально)
        Status__c:
          type: string
          enum:
            - Sent
            - Registered
            - Rejected
          description: Статус запрошення
        Registration_Date__c:
          type: string
          format: date-time
          description: Дата та час реєстрації користувача (опціонально)
        Invitation_Date__c:
          type: string
          format: date-time
          description: Дата та час відправки запрошення
        Sender_Role__c:
          type: string
          description: Роль контакту Sender__c
        Registered_User_Role__c:
          type: string
          description: Роль контакту Registered_User__c
        External_Id__c:
          type: string
          description: Унікальний зовнішній ідентифікатор запису
        Invited_User_FullName__c:
          type: string
          description: Повне ім'я запрошеного користувача
        Invited_User_Phone__c:
          type: string
          description: Телефон запрошеного користувача
        Name:
          type: string
          description: Авто-номер (генерується системою)
    ReferralResponse:
      type: object
      properties:
        status:
          type: string
          description: Статус відповіді
          example: success
        message:
          type: string
          description: Повідомлення про результат

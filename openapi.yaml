openapi: 3.0.3

info:
  title: Products Catalog Mobile API
  version: "1.0.0"
  description: Products catalog response for mobile application

servers:
  - url: https://your-salesforce-domain/services/apexrest

paths:
  /mobile/catalog:
    get:
      summary: Get products catalog
      description: |
        Returns product catalog by chunks or single product by external ID.
        Only one parameter should be provided.
      parameters:
        - name: chunkNumber
          in: query
          required: false
          schema:
            type: integer
          description: Chunk number for pagination
        - name: productExternalId
          in: query
          required: false
          schema:
            type: string
          description: External ID of product
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/ProductChunkWrapper'
                  - $ref: '#/components/schemas/Product'
        '400':
          description: Validation error

components:
  schemas:

    ProductChunkWrapper:
      type: object
      properties:
        totalChunks:
          type: integer
        chunkNumber:
          type: integer
        products:
          type: array
          items:
            $ref: '#/components/schemas/Product'

    Product:
      type: object
      properties:
        active:
          type: boolean
        name:
          type: string
        productExternalId:
          type: string
        category:
          type: string
        productDescription:
          type: string
        productBenefits:
          type: string
        compatibility:
          type: string
        preparativeForm:
          type: string
        producingCountry:
          type: string
        transportationHazardRate:
          type: string
        substanceConcentration:
          type: string

        productBrand:
          $ref: '#/components/schemas/BrandInfo'

        registrationInfo:
          $ref: '#/components/schemas/RegistrationInfo'

        cultures:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapper'

        soil:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapper'

        weeds:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapperForGrowthPhases'

        pests:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapperForGrowthPhases'

        diseases:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapperForGrowthPhases'

        purposes:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapper'

        alsoBoughtWithThisProduct:
          type: array
          items:
            $ref: '#/components/schemas/GenericWrapper'

        childProducts:
          type: array
          items:
            $ref: '#/components/schemas/ChildProduct'

        seedInfo:
          $ref: '#/components/schemas/SeedCharacteristics'

        pesticideInfo:
          $ref: '#/components/schemas/PesticideCharacteristics'

        fertilizerInfo:
          $ref: '#/components/schemas/FertilizerCharacteristics'

        fuelInfo:
          $ref: '#/components/schemas/FuelCharacteristics'

        usagePrecautions:
          $ref: '#/components/schemas/UsagePrecautionsInfo'

    GenericWrapper:
      type: object
      properties:
        name:
          type: string
        externalId:
          type: string

    GenericWrapperForGrowthPhases:
      type: object
      properties:
        name:
          type: string
        externalId:
          type: string
        resistanceLevel:
          type: string

    BrandInfo:
      type: object
      properties:
        name:
          type: string
        externalId:
          type: string
        country:
          type: string

    RegistrationInfo:
      type: object
      properties:
        applicant:
          $ref: '#/components/schemas/GenericWrapper'
        owner:
          $ref: '#/components/schemas/GenericWrapper'
        applicationNumber:
          type: string
        applicationSeries:
          type: string
        registrationYear:
          type: string
        documentExpirationDate:
          type: string
          format: date

    UsagePrecautionsInfo:
      type: object
      properties:
        USAID:
          type: boolean
        hazardClass:
          type: string
        recommendationForUse:
          type: string
        beesHazardClass:
          type: string
        beesRecommendationForUse:
          type: string
        cargoGroup:
          type: string
        disposalRecommendations:
          type: string
        prohibitedUse:
          type: string

    ChildProduct:
      type: object
      properties:
        active:
          type: boolean
        name:
          type: string
        currencyPrice:
          type: number
          format: double
        lowerCurrencyPrice:
          type: number
          format: double
        exchangeIndex:
          type: number
          format: double
        volume:
          type: number
          format: double
        containerForm:
          type: string
        containerType:
          type: string
        productCurrency:
          type: string
        productExternalId:
          type: string
        warehouseStatus:
          type: string
        tbc:
          type: boolean
        vat:
          type: number
          format: double
        country:
          type: string
